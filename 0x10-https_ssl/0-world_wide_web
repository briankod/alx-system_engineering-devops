#!/usr/bin/env bash
# A script that will display information about subdomains, after configuring your domain zone so
# that the subdomain www points to your load-balancer IP (lb-01), and adding other subdomains.

query() {
    # Check for a valid domain
    a=("www"  "lb-01" "web-01" "web-02")
    if [ -z "$2" ]; then
	for i in "${a[@]}"
    do
	    dig "$i.$1" | grep -A1 'ANSWER SECTION:' | tail -n1 | awk '{split($0, a, "."); print "The subdomain " a[1] " is a " $4 " record and points to " $5}'
	done
    else
	dig "$2.$1" | grep -A1 'ANSWER SECTION:' | tail -n1 | awk '{split($0, a, "."); print "The subdomain " a[1] " is a " $4 " record and points to " $5}'
    fi
}

query "$1" "$2"
