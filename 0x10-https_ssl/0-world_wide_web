#!/usr/bin/env bash
# A script that will display information about subdomains, after configuring your domain zone so
# that the subdomain www points to your load-balancer IP (lb-01), and adding other subdomains.

query () {
    A=$(dig "$2"."$1" | awk '/ANSWER SECTION:/{getline;print;}')
    SUB_DOMAIN=$2
    RECORD_TYPE=$(echo "$A" | cut -d' ' -f 4)
    DESTINATION=$(echo "$A" | cut -d' ' -f 5)
    echo "The subdomain $SUB_DOMAIN is a $RECORD_TYPE record and points to $DESTINATION"
}
if [ $# -lt 1 ]
then
    echo "Usage: 1-world_wide_web DOMAIN SUBDOMAIN(optional)"
elif [ $# -eq 1 ]
then
    query "$1" "www"
    query "$1" "lb-01"
    query "$1" "web-01"
    query "$1" "web-02"
else
    query "$1" "$2"
fi
